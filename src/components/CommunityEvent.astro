---
import type { CollectionEntry } from 'astro:content'

type Props = {
  event: CollectionEntry<'events'>
  isPast?: boolean
}

const { event, isPast = false } = Astro.props
const { title, description, date, location, rsvpLink, tags } = event.data

// Formatear la fecha y hora
const formattedDate = new Date(date).toLocaleDateString('gl-ES', {
  day: 'numeric',
  month: 'long',
  year: 'numeric',
  hour: '2-digit',
  minute: '2-digit'
})
---

<div class={`event-card ${isPast ? 'past' : ''}`}>
  <h3 class="event-title">{title}</h3>
  <p class="event-date">{formattedDate}</p>
  {location && <p class="event-location">{location}</p>}
  <p class="event-description">{description}</p>

  {
    !isPast && rsvpLink && (
      <a
        href={rsvpLink}
        class="event-rsvp-link"
        target="_blank"
        rel="noopener noreferrer"
      >
        Inscr√≠bete
      </a>
    )
  }

  <div class="event-tags">
    {tags.map(tag => <span class="tag small">{tag}</span>)}
  </div>
</div>
