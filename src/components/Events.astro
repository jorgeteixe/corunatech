---
import MonthlyCalendar from './MonthlyCalendar.astro'
import EventTooltip from './EventTooltip.astro'
import { getCollection } from 'astro:content'
import '../styles/components/Events.css'
const allEvents = await getCollection('events')
const communities = await getCollection('communities')
const communityMap = new Map(
  communities.map(community => [community.id, community.data.name])
)
const communityNames = Object.fromEntries(communityMap)
---

<section class="events-section" id="eventos">
  <div class="events-container">
    <MonthlyCalendar events={allEvents} communityNames={communityNames} />
  </div>

  <!-- Tooltip to show event details -->
  <EventTooltip />
</section>

<script src="../scripts/event-tooltip.ts"></script>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    if (window.initializeEventTooltips) {
      window.initializeEventTooltips()
    }
  })
</script>
