---
import '../styles/components/EventCard.css'
export interface Props {
  slug: string
  title: string
  description: string
  date: Date
  endDate?: Date
  duration?: string
  location?: string
  rsvpLink?: string
  tags: string[]
  community: string
  communityName?: string
}

const {
  slug,
  title,
  description,
  date,
  endDate,
  duration,
  location,
  rsvpLink,
  tags,
  community,
  communityName
} = Astro.props

const formatDate = (date: Date) => {
  return new Intl.DateTimeFormat('gl', {
    weekday: 'long',
    year: 'numeric',
    month: 'long',
    day: 'numeric',
    hour: '2-digit',
    minute: '2-digit'
  }).format(date)
}

const formatTime = (date: Date) => {
  return new Intl.DateTimeFormat('gl', {
    hour: '2-digit',
    minute: '2-digit'
  }).format(date)
}
---

<div class="event-card">
  <div class="event-card-content">
    <!-- Header -->
    <div class="event-card-header">
      <div>
        <h3 class="event-card-title">{title}</h3>
        <p class="event-card-community">{communityName || community}</p>
      </div>
    </div>

    <!-- Date and Time -->
    <div class="event-card-details">
      <p class="event-card-detail">
        <span class="event-card-detail-icon">📅</span>
        {formatDate(date)}
      </p>
      {
        duration && (
          <p class="event-card-detail">
            <span class="event-card-detail-icon">⏱️</span>
            Duración: {duration}
          </p>
        )
      }
      {
        location && (
          <p class="event-card-detail">
            <span class="event-card-detail-icon">📍</span>
            {location}
          </p>
        )
      }
    </div>

    <!-- Description -->
    <p class="event-card-description">{description}</p>

    <!-- Tags -->
    <div class="event-card-tags">
      {tags.map(tag => <span class="event-card-tag">{tag}</span>)}
    </div>

    <!-- Footer -->
    {
      rsvpLink && (
        <div class="event-card-footer">
          <a
            href={rsvpLink}
            target="_blank"
            rel="noopener noreferrer"
            class="event-card-rsvp-link"
          >
            Apuntarse →
          </a>
        </div>
      )
    }
  </div>
</div>
